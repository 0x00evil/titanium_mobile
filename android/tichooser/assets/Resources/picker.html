<html>
<head>
	<title>Picker</title>
	<style>
	#change1 {
		color: white;
		background-color: #030;
		font-style: italic;
		font-size: 12pt;
		margin-top: 10px;
		padding: 5px;
	}
	</style>
  	<script><!--

  	var data = [];

  	var col1 = {
  		height : '40',
  		data : [
	  		{ title : 'Daffy' },
	  		{ title : 'Goofy' },
	  		{ title : 'Donald' },
	  		{ title : 'Minnie', selected : 'true' },
	  		{ title : 'Huey' },
	  		{ title : 'Dewey' },
	  		{ title : 'Louie' }
  		]
  	};

  	var col2 = {
  		width : '150',
  		data : [
	  		{ title : 'Dog' },
	  		{ title : 'Duck' },
	  		{ title : 'Mouse', selected : 'true' }
  		]
  	};

  	var col3 = {
  		  data : [
  		      { html : "<div style='font-weight: bold; font-size: 15pt; color: red;'><img src='images/icon-32x32.png'/> Item 1</div>" },
  		      { html : "<div style='font-weight: bold; font-size: 15pt;' color: blue>Item 2</div>"},
  		      { html : "<div style='font-weight: bold; font-size: 15pt; color: green'>Item 3</div>"},
  		      { html : "<div style='font-weight: bold; font-size: 15pt; color: purple'>Item 4</div>"}
  		]
  	};

  	data.push(col1);
  	data.push(col2);

  	var p1 = Titanium.UI.createPicker({
  	  	id : 'p1',
  	  	data : data
  	});
  	p1.addEventListener('change', function(e) {
  	    var col = e.column;
  	    var row = e.row;
  	    var selectedValue = e.selectedValue;

  	    var v = "<br/>"
  	    for(i=0; i < selectedValue.length; i++) {
  	  	    var c = selectedValue[i];
  	  	    if (!isUndefined(c.html)) {
  	  	  	    v += "<div>" + c.html + "</div>";
  	  	    } else {
  	  	  	    v += "<div>" + c.title + "</div>";
  	  	    }
  	    }

  	    var c = document.getElementById('change1');
  	    c.innerHTML = "[" + col + "," + row + "] Items: " + selectedValue.length + v;
  	});

  	var btnAnimals = Titanium.UI.createButton({id:'btn-animals', title: 'More Animals'});
  	btnAnimals.addEventListener('click', function(e) {
  	  	col2.width = '200';
  	  	col2.data.push({title : 'Elephant'});
  	  	col2.data.push({title : 'Hippo'});
  	  	col2.data.push({title : 'Eagle'});

  	  	p1.setColumnData(1,col2);
  	});

  	var btnSingleCol = Titanium.UI.createButton({id : 'btn-single-col', title : 'Single Column'});
  	btnSingleCol.addEventListener('click', function(e) {
		var data = [
	        {
	        	data : [
        	        { title : 'Item 1'},
        	        { title : 'Item 2'},
        	        { title : 'Item 3'},
        	        { title : 'Item 4'}
	    	    ]
	        }
		];

		p1.setData(data);

		document.getElementById('btn-animals').style.display = "none";
  	});

  	var btnReplaceTwo = Titanium.UI.createButton({id: 'btn-replace', title : 'Replace Col 2'});
  	btnReplaceTwo.addEventListener('click', function(e) {
  	  	p1.setData(data);
  	  	p1.setColumnData(1, col3);
		document.getElementById('btn-animals').style.display = "block";
  	});

  	var data2 = [];
  	var col1a = {
 		height: '40px',
		width: '120px',
		data : []
  	};
  	for(i = 0; i < col1.data.length; i++) {
  	  	col1a.data.push(col1.data[i]);
  	}
  	data2.push(col1a);

  	var col2a = {
  		height: '40px',
  		width: '120px',
		data : []
  	};
  	for(i = 0; i < col2.data.length; i++) {
  	  	col2a.data.push(col2.data[i]);
  	}
  	data2.push(col2a);

  	var dlg = Titanium.UI.createModalPicker({ data : data2});
  	dlg.addEventListener('change', function(e) {
  	    var selectedValue = e.selectedValue;

  	    var v = "<br/>"
  	    for(i=0; i < selectedValue.length; i++) {
  	  	    var c = selectedValue[i];
  	  	    if (!isUndefined(c.html)) {
  	  	  	    v += "<div>" + c.html + "</div>";
  	  	    } else {
  	  	  	    v += "<div>" + c.title + "</div>";
  	  	    }
  	    }

  	    var c = document.getElementById('change1');
  	    c.innerHTML = "Items: " + selectedValue.length + v;
  	});

  	var dlgShowBtn = Titanium.UI.createButton({id: 'btn-dlg-show', title : 'Show'});
  	dlgShowBtn.addEventListener('click', function(e) {
  	  	dlg.setData(data2);
  	  	dlg.show();
  	});

  --></script>
</head>
<body style="background-color: white;">
<div style="width:99%; height: 80px; background-color: #aaa; margin-bottom: 20px">
	<div id="btn-animals" style="width: 30%; height: 40px; float: left; margin-right: 5px; margin-left: 5%">&nbsp;</div>
	<div id="btn-single-col" style="width: 30%; height: 40px; float: left;">&nbsp;</div>
	<div id="btn-replace" style="width: 30%; height: 40px; float: left;">&nbsp;</div>
	<div id="btn-dlg-show" style="width: 30%; height: 40px; float: left; margin-right: 5px; margin-left: 5%">&nbsp;</div>

</div>
<hr/>
<div id='p1' style='height: 50px; width: 300px; clear:both; background-color: #666'>&nbsp;</div>
<div id='change1'>&nbsp;</div>

</body>
</html>